test test_parse_for_loop ... ok

test result: ok. 14 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/debug_sigsegv.rs (target/debug/deps/debug_sigsegv-26b1e24dfefccd82)

running 1 test
test test_control_flow_minimal ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.02s

     Running tests/stdlib_integration_tests.rs (target/debug/deps/stdlib_integration_tests-84c74d8dc3988d65)

running 6 tests
test test_println_tokenization ... ok
test test_stdlib_tokenization ... ok
test test_stdlib_type_checking ... FAILED
test test_basic_stdlib_program ... FAILED
test test_vec_new_parsing ... FAILED
test test_stdlib_parsing ... FAILED

failures:

---- test_stdlib_type_checking stdout ----
🎯 Starting compile_to_ast...
🌳 Calling parse...
🌳 Starting parse...
🔍 Calling tokenize...
🔍 Starting tokenize...
🏗️ Creating lexer...
✅ Lexer created
🏗️ Calling tokenize_all...
✅ tokenize_all completed
✅ Tokenize completed, got 56 tokens
🏗️ Creating parser...
✅ Parser created
🏗️ Calling parse_program...
🏗️ Starting parse_program...
🔄 Starting parsing loop...
🔄 Parse loop iteration 1, current position: 0
🔄 Calling declaration()...
✅ Declaration successful, got statement
✅ parse_program completed
✅ Parse completed, got 1 statements
🎯 Calling type_check...
🎯 Starting type_check...
🏗️ Creating type checker...
✅ Type checker created
🏗️ Calling check_program...
✅ check_program completed

thread 'test_stdlib_type_checking' panicked at tests/stdlib_integration_tests.rs:61:5:
Type checking should succeed: Some(TypeError { message: "Type mismatch in variable 'numbers': declared as Custom(\"Vec\"), initialized with StdVec(I32)", position: Position { line: 0, column: 0, offset: 0 } })
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- test_basic_stdlib_program stdout ----
🎯 Starting compile_to_ast...
🌳 Calling parse...
🌳 Starting parse...
🔍 Calling tokenize...
🔍 Starting tokenize...
🏗️ Creating lexer...
✅ Lexer created
🏗️ Calling tokenize_all...
✅ tokenize_all completed
✅ Tokenize completed, got 17 tokens
🏗️ Creating parser...
✅ Parser created
🏗️ Calling parse_program...
🏗️ Starting parse_program...
🔄 Starting parsing loop...
🔄 Parse loop iteration 1, current position: 0
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 3, column: 13, offset: 41 } }
🔄 Parse loop iteration 2, current position: 13
🔄 Calling declaration()...
✅ Declaration successful, got statement
🔄 Parse loop iteration 3, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 4, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 5, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 6, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 7, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 8, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 9, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 10, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 11, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 12, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 13, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 14, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 15, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 16, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 17, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 18, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 19, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 20, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 21, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 22, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 23, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 24, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 25, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 26, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 27, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 28, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 29, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 30, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 31, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 32, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 33, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 34, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 35, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 36, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 37, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 38, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 39, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 40, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 41, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 42, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 43, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 44, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 45, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 46, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 47, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 48, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 49, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 50, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 51, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 52, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 53, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 54, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 55, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 56, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 57, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 58, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 59, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 60, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 61, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 62, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 63, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 64, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 65, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 66, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 67, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 68, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 69, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 70, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 71, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 72, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 73, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 74, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 75, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 76, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 77, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 78, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 79, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 80, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 81, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 82, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 83, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 84, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 85, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 86, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 87, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 88, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 89, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 90, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 91, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 92, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 93, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 94, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 95, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 96, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 97, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 98, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 99, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 100, current position: 15
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 5, column: 9, offset: 104 } }
🔄 Parse loop iteration 101, current position: 15
❌ Parse loop detected (over 1000 iterations), breaking
✅ parse_program completed

thread 'test_basic_stdlib_program' panicked at tests/stdlib_integration_tests.rs:91:5:
Full compilation should succeed: Some(ParseError { message: "Infinite loop detected in parser", position: Position { line: 5, column: 9, offset: 104 } })

---- test_vec_new_parsing stdout ----
🔍 Starting tokenize...
🏗️ Creating lexer...
✅ Lexer created
🏗️ Calling tokenize_all...
✅ tokenize_all completed
Tokens: [Token { kind: Identifier("fn"), lexeme: "fn", position: Position { line: 1, column: 1, offset: 0 } }, Token { kind: Identifier("main"), lexeme: "main", position: Position { line: 1, column: 4, offset:
3 } }, Token { kind: LeftParen, lexeme: "(", position: Position { line: 1, column: 8, offset: 7 } }, Token { kind: RightParen, lexeme: ")", position: Position { line: 1, column: 9, offset: 8 } }, Token { kind:
LeftBrace, lexeme: "{", position: Position { line: 1, column: 11, offset: 10 } }, Token { kind: Let, lexeme: "let", position: Position { line: 1, column: 13, offset: 12 } }, Token { kind: Identifier("vec"), lexeme: "vec", position: Position { line: 1, column: 17, offset: 16 } }, Token { kind: Assign, lexeme: "=", position: Position { line: 1, column: 21, offset: 20 } }, Token { kind: VecType, lexeme: "Vec", position: Position { line: 1, column: 23, offset: 22 } }, Token { kind: DoubleColon, lexeme: "::", position: Position { line: 1, column: 26, offset: 25 } }, Token { kind: Identifier("new"), lexeme: "new", position: Position { line: 1, column: 28, offset: 27 } }, Token { kind: LeftParen, lexeme: "(", position: Position { line: 1, column: 31, offset: 30 } }, Token { kind: RightParen, lexeme: ")", position: Position { line: 1, column: 32, offset: 31 } }, Token { kind: Semicolon, lexeme: ";", position: Position { line: 1, column: 33, offset: 32 } }, Token { kind: RightBrace, lexeme: "}", position: Position { line: 1, column: 35, offset: 34 } }, Token { kind: Eof, lexeme: "", position: Position { line: 1, column: 36, offset: 35 } }]
🌳 Starting parse...
🔍 Calling tokenize...
🔍 Starting tokenize...
🏗️ Creating lexer...
✅ Lexer created
🏗️ Calling tokenize_all...
✅ tokenize_all completed
✅ Tokenize completed, got 16 tokens
🏗️ Creating parser...
✅ Parser created
🏗️ Calling parse_program...
🏗️ Starting parse_program...
🔄 Starting parsing loop...
🔄 Parse loop iteration 1, current position: 0
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected ';' after expression", position: Position { line: 1, column: 4, offset: 3 } }
🔄 Parse loop iteration 2, current position: 5
🔄 Calling declaration()...
✅ Declaration successful, got statement
🔄 Parse loop iteration 3, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 4, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 5, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 6, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 7, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 8, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 9, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 10, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 11, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 12, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 13, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 14, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 15, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 16, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 17, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 18, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 19, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 20, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 21, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 22, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 23, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 24, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 25, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 26, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 27, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 28, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 29, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 30, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 31, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 32, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 33, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 34, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 35, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 36, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 37, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 38, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 39, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 40, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 41, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 42, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 43, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 44, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 45, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 46, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 47, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 48, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 49, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 50, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 51, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 52, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 53, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 54, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 55, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 56, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 57, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 58, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 59, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 60, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 61, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 62, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 63, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 64, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 65, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 66, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 67, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 68, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 69, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 70, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 71, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 72, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 73, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 74, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 75, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 76, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 77, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 78, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 79, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 80, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 81, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 82, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 83, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 84, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 85, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 86, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 87, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 88, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 89, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 90, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 91, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 92, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 93, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 94, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 95, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 96, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 97, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 98, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 99, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 100, current position: 14
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got RightBrace", position: Position { line: 1, column: 35, offset: 34 } }
🔄 Parse loop iteration 101, current position: 14
❌ Parse loop detected (over 1000 iterations), breaking
✅ parse_program completed

thread 'test_vec_new_parsing' panicked at tests/stdlib_integration_tests.rs:106:29:
Parsing should succeed: ParseError { message: "Infinite loop detected in parser", position: Position { line: 1, column: 35, offset: 34 } }

---- test_stdlib_parsing stdout ----
🌳 Starting parse...
🔍 Calling tokenize...
🔍 Starting tokenize...
🏗️ Creating lexer...
✅ Lexer created
🏗️ Calling tokenize_all...
✅ tokenize_all completed
✅ Tokenize completed, got 28 tokens
🏗️ Creating parser...
✅ Parser created
🏗️ Calling parse_program...
🏗️ Starting parse_program...
🔄 Starting parsing loop...
🔄 Parse loop iteration 1, current position: 0
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 2, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 3, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 4, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 5, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 6, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 7, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 8, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 9, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 10, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 11, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 12, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 13, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 14, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 15, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 16, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 17, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 18, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 19, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 20, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 21, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 22, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 23, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 24, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 25, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 26, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 27, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 28, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 29, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 30, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 31, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 32, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 33, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 34, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 35, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 36, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 37, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 38, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 39, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 40, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 41, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 42, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 43, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 44, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 45, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 46, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 47, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 48, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 49, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 50, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 51, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 52, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 53, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 54, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 55, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 56, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 57, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 58, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 59, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 60, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 61, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 62, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 63, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 64, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 65, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 66, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 67, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 68, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 69, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 70, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 71, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 72, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 73, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 74, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 75, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 76, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 77, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 78, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 79, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 80, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 81, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 82, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 83, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 84, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 85, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 86, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 87, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 88, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 89, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 90, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 91, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 92, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 93, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 94, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 95, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 96, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 97, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 98, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 99, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 100, current position: 19
🔄 Calling declaration()...
❌ Declaration failed: ParseError { message: "Expected expression, got Println", position: Position { line: 4, column: 13, offset: 80 } }
🔄 Parse loop iteration 101, current position: 19
❌ Parse loop detected (over 1000 iterations), breaking
✅ parse_program completed

thread 'test_stdlib_parsing' panicked at tests/stdlib_integration_tests.rs:44:5:
Parsing should succeed: Some(ParseError { message: "Infinite loop detected in parser", position: Position { line: 4, column: 13, offset: 80 } })

failures:
test_basic_stdlib_program
test_stdlib_parsing
test_stdlib_type_checking
test_vec_new_parsing

test result: FAILED. 2 passed; 4 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

error: test failed, to rerun pass `--test stdlib_integration_tests`
